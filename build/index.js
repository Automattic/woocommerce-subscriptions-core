!function(){"use strict";var e=window.wp.element,t=window.wp.plugins,n=window.wc.blocksCheckout,r=window.wp.i18n,i=window.wc.priceFormat;function s(e){return{day:(0,r._nx)("day","days",e,"Used in recurring totals section in Cart. 2+ will need plural, 1 will need singular.","woocommerce-subscriptions"),week:(0,r._nx)("week","weeks",e,"Used in recurring totals section in Cart. 2+ will need plural, 1 will need singular.","woocommerce-subscriptions"),month:(0,r._nx)("month","months",e,"Used in recurring totals section in Cart. 2+ will need plural, 1 will need singular.","woocommerce-subscriptions"),year:(0,r._nx)("year","years",e,"Used in recurring totals section in Cart. 2+ will need plural, 1 will need singular.","woocommerce-subscriptions")}}function l(e,t,n){let{billing_interval:i,billing_period:l}=e;const o=s(i)[l];return t=t.trim(),1===i?`${n} ${t} ${o}`:(0,r.sprintf)(
/*
       * translators: %1$s is the price of the product. %2$s is the separator used e.g "every" or "/",
       * %3$d is the length, %4$s is week, month, year
       */
(0,r.__)("%1$s %2$s %3$d %4$s","woocommerce-subscriptions"),n,t,i,o)}function o(e){let{subscriptionLength:t,billingInterval:n}=e;return t===n}const c=(0,window.wc.wcSettings.getSetting)("displayCartPricesIncludingTax",!1),a=t=>{let{currency:i,values:s}=t;const{total_discount:l,total_discount_tax:o}=s,a=parseInt(l,10);if(!a)return null;const u=parseInt(o,10),p=c?a+u:a;return(0,e.createElement)(n.TotalsItem,{className:"wc-block-components-totals-discount",currency:i,label:(0,r.__)("Discount","woocommerce-subscriptions"),value:-1*p})},u=t=>{let{values:i,currency:s,selectedRate:l,needsShipping:o,calculatedShipping:a}=t;if(!o||!a)return null;const u=c?parseInt(i.total_shipping,10)+parseInt(i.total_shipping_tax,10):parseInt(i.total_shipping,10);return(0,e.createElement)(n.TotalsItem,{value:u,label:(0,r.__)("Shipping","woocommerce-subscriptions"),currency:s,description:!!l&&(0,r.sprintf)(
// translators: %s selected shipping rate (ex: flat rate)
(0,r.__)("via %s","woocommerce-subscriptions"),l)})},p=t=>{let{nextPaymentDate:n,subscriptionLength:i,billingPeriod:l,billingInterval:c}=t;const a=function(e){let{subscriptionLength:t,billingPeriod:n}=e;const i=s(t);return(0,r.sprintf)("For %1$d %2$s",t,i[n],"woocommerce-subscriptions")}({subscriptionLength:i,billingPeriod:l}),u=o({subscriptionLength:i,billingInterval:c})?(0,r.sprintf)(/* Translators: %1$s is a date. */
(0,r.__)("Due: %1$s","woocommerce-subscriptions"),n):(0,r.sprintf)(/* Translators: %1$s is a date. */
(0,r.__)("Starting: %1$s","woocommerce-subscriptions"),n);return(0,e.createElement)("span",null,!!n&&u," ",!!i&&i>=c&&(0,e.createElement)("span",{className:"wcs-recurring-totals__subscription-length"},a))},m=t=>{let{currency:i,billingInterval:s,billingPeriod:l,nextPaymentDate:c,subscriptionLength:a,totals:u}=t;const m=o({billingInterval:s,subscriptionLength:a})?(0,r.__)("Total","woocommerce-subscriptions"):function(e){let{billingInterval:t,billingPeriod:n}=e;switch(t){case 1:if("day"===n)return(0,r.__)("Daily recurring total","woocommerce-subscriptions");if("week"===n)return(0,r.__)("Weekly recurring total","woocommerce-subscriptions");if("month"===n)return(0,r.__)("Monthly recurring total","woocommerce-subscriptions");if("year"===n)return(0,r.__)("Yearly recurring total","woocommerce-subscriptions");break;case 2:return(0,r.sprintf)(/* translators: %1$s is week, month, year */
(0,r.__)("Recurring total every 2nd %1$s","woocommerce-subscriptions"),n);case 3:return(0,r.sprintf)(/* Translators: %1$s is week, month, year */
(0,r.__)("Recurring total every 3rd %1$s","woocommerce-subscriptions"),n);default:return(0,r.sprintf)(/* Translators: %1$d is number of weeks, months, days, years. %2$s is week, month, year */
(0,r.__)("Recurring total every %1$dth %2$s","woocommerce-subscriptions"),t,n)}}({billingInterval:s,billingPeriod:l});return(0,e.createElement)(n.TotalsItem,{className:"wcs-recurring-totals-panel__title",currency:i,label:m,value:u,description:(0,e.createElement)(p,{nextPaymentDate:c,subscriptionLength:a,billingInterval:s,billingPeriod:l})})},g=t=>{var s,l,o;let{subscription:p,needsShipping:g,calculatedShipping:b}=t;const{totals:_,billing_interval:d,billing_period:w,next_payment_date:h,subscription_length:y,shipping_rates:v}=p;if(!h)return null;const f=null==v||null===(s=v[0])||void 0===s||null===(l=s.shipping_rates)||void 0===l||null===(o=l.find((e=>{let{selected:t}=e;return t})))||void 0===o?void 0:o.name,E=(0,i.getCurrencyFromPriceResponse)(_);return(0,e.createElement)("div",{className:"wcs-recurring-totals-panel"},(0,e.createElement)(m,{billingInterval:d,billingPeriod:w,nextPaymentDate:h,subscriptionLength:y,totals:parseInt(_.total_price,10),currency:E}),(0,e.createElement)(n.Panel,{className:"wcs-recurring-totals-panel__details",initialOpen:!1,title:(0,r.__)("Details","woocommerce-subscriptions")},(0,e.createElement)(n.TotalsWrapper,null,(0,e.createElement)(n.Subtotal,{currency:E,values:_}),(0,e.createElement)(a,{currency:E,values:_})),(0,e.createElement)(n.TotalsWrapper,null,(0,e.createElement)(u,{currency:E,needsShipping:g,calculatedShipping:b,values:_,selectedRate:f})),!c&&(0,e.createElement)(n.TotalsWrapper,null,(0,e.createElement)(n.TotalsTaxes,{currency:E,values:_})),(0,e.createElement)(n.TotalsWrapper,null,(0,e.createElement)(n.TotalsItem,{className:"wcs-recurring-totals-panel__details-total",currency:E,label:(0,r.__)("Total","woocommerce-subscriptions"),value:parseInt(_.total_price,10)}))))},b=t=>{let{extensions:n,cart:r}=t;const{subscriptions:i}=n,{cartNeedsShipping:s,cartHasCalculatedShipping:l}=r;return i&&0!==i.length?i.map((t=>{let{key:n,...r}=t;return(0,e.createElement)(g,{subscription:r,needsShipping:s,calculatedShipping:l,key:n})})):null},_=t=>{let{extensions:n,collapsible:r,collapse:i,showItems:s,noResultsMessage:l,renderOption:o,components:c}=t;const{subscriptions:a=[]}=n,{ShippingRatesControlPackage:u}=c,p=(0,e.useMemo)((()=>Object.values(a).map((e=>e.shipping_rates)).filter(Boolean).flat()),[a]),m=(0,e.useMemo)((()=>1<p.length||i),[p.length,i]),g=(0,e.useMemo)((()=>1<p.length||s),[p.length,s]);return p.map((t=>{let{package_id:n,...i}=t;return(0,e.createElement)(u,{key:n,packageId:n,packageData:i,collapsible:r,collapse:m,showItems:g,noResultsMessage:l,renderOption:o})}))};(0,t.registerPlugin)("woocommerce-subscriptions",{render:()=>(0,e.createElement)(e.Fragment,null,(0,e.createElement)(n.ExperimentalOrderShippingPackages,null,(0,e.createElement)(_,null)),(0,e.createElement)(n.ExperimentalOrderMeta,null,(0,e.createElement)(b,null))),scope:"woocommerce-checkout"}),(0,n.__experimentalRegisterCheckoutFilters)("woocommerce-subscriptions",{totalLabel:(e,t)=>{let{subscriptions:n}=t;return 0<(null==n?void 0:n.length)?(0,r.__)("Total due today","woocommerce-subscriptions"):e},subtotalPriceFormat:(e,t)=>{let{subscriptions:n}=t;if(null!=n&&n.billing_period&&null!=n&&n.billing_interval){const{billing_interval:t,subscription_length:i}=n;return o({subscriptionLength:i,billingInterval:t})?l(n,1===i?
// translators: the word used to describe billing frequency, e.g. "fo1" 1 day or "for" 1 month.
(0,r.__)("for 1","woocommerce-subscriptions"):
// translators: the word used to describe billing frequency, e.g. "for" 6 days or "for" 2 weeks.
(0,r.__)("for","woocommerce-subscriptions"),e):l(n,
// translators: the word used to describe billing frequency, e.g. "every" 6 days or "every" 2 weeks.
(0,r.__)("every","woocommerce-subscriptions"),e)}return e},saleBadgePriceFormat:(e,t)=>{let{subscriptions:n}=t;return null!=n&&n.billing_period&&null!=n&&n.billing_interval?l(n,"/",e):e},itemName:(e,t)=>{let{subscriptions:n}=t;return null!=n&&n.is_resubscribe?(0,r.sprintf)(
// translators: %s Product name.
(0,r.__)("%s (resubscription)","woocommerce-subscriptions"),e):null!=n&&n.switch_type?(0,r.sprintf)(
// translators: %1$s Product name, %2$s Switch type (upgraded, downgraded, or crossgraded).
(0,r.__)("%1$s (%2$s)","woocommerce-subscriptions"),e,function(e){switch(e){case"upgraded":return(0,r.__)("Upgrade","woocommerce-subscriptions");case"downgraded":return(0,r.__)("Downgrade","woocommerce-subscriptions");case"crossgraded":return(0,r.__)("Crossgrade","woocommerce-subscriptions");default:return""}}(n.switch_type)):e},cartItemPrice:(e,t,n)=>{let{subscriptions:i}=t,{context:s}=n;return null!=i&&i.sign_up_fees?"cart"===s?(0,r.sprintf)(/* translators: %s is the subscription price to pay immediately (ie: $10). */
(0,r.__)("Due today %s","woocommerce-subscriptions"),e):(0,r.sprintf)(/* translators: %s is the subscription price to pay immediately (ie: $10). */
(0,r.__)("%s due today","woocommerce-subscriptions"),e):e}})}();